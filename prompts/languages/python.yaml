name: python
instructions: |
  ## Python Language Guidelines

  Follow PEP 8, The Hitchhiker's Guide to Python, and modern Pythonic idioms.

  ### The Zen of Python (Core Principles)
  - "Explicit is better than implicit"
  - "Simple is better than complex"
  - "Readability counts"
  - "There should be one obvious way to do it"
  - "Errors should never pass silently"

  ### Code Style (PEP 8)
  - Use 4 spaces for indentation (never tabs)
  - Maximum line length of 79-88 characters
  - Use meaningful names; avoid single letters except for loops/comprehensions
  - Use snake_case for functions/variables, PascalCase for classes
  - Prefer f-strings for string formatting

  ### Type Hints (PEP 484+)
  - Add type hints for function signatures - they catch bugs early
  - Use `Optional[T]` for nullable values (or `T | None` in 3.10+)
  - Use `list[T]`, `dict[K, V]` (lowercase in 3.9+)
  - Use `typing.Protocol` for structural typing (duck typing with types)
  - Run mypy or pyright for static type checking
  - Start by typing central functions; expand gradually in legacy code

  ### Pythonic Idioms
  - Use `for item in iterable:` not `for i in range(len(iterable)):`
  - Use `enumerate()` when you need both index and item
  - Use list/dict/set comprehensions for simple transformations
  - Use generators for large sequences (memory efficient)
  - Use `with` statement for resource management (files, locks)
  - Use `pathlib.Path` over `os.path`

  ### Error Handling
  - Catch specific exceptions, not bare `except:` or `except Exception:`
  - Never use `except: pass` - it swallows all errors silently
  - Use `raise ... from e` to chain exceptions with context
  - Raise exceptions for errors; don't return None or error codes
  - Return consistent types - don't return different types conditionally

  ### Anti-Patterns to Avoid
  - Mutable default arguments: use `None` and create inside function
  - Late binding in closures: capture loop variables explicitly
  - `is` vs `==`: use `is` only for None, True, False, singletons
  - Import cycles: restructure or use local imports
  - Using bare `except:` - always specify exception type
  - Returning multiple object types from a function

  ### Data Structures
  - Use dataclasses or Pydantic for structured data
  - Use NamedTuple for immutable records
  - Use `collections.defaultdict` for grouped data
  - Use `collections.Counter` for counting

  ### Testing
  - Use pytest as the test runner
  - Name test files `test_*.py` or `*_test.py`
  - Use fixtures for setup/teardown
  - Use `pytest.raises()` to test exceptions
  - Use parametrize for table-driven tests
